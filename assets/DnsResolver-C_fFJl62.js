import{u as D,c as N,r as b,e as a,f as e,t as n,h as d,n as h,x as $,G as M,H as T,j as E,q as k,F as L,l as U,b as i}from"./vendor-CvqS6pG7.js";import{_ as j,u as q,t as z}from"./index-BxdBlEeC.js";const V={class:"dns-resolver-section my-4"},X={class:"text-secondary"},B={class:"row"},I={class:"col-12 mb-3"},F={class:"card-body"},H={class:"col-12 col-md-auto"},K={for:"queryURL",class:"col-form-label"},P={class:"input-group mb-2 mt-2"},G=["disabled","placeholder"],O=["disabled"],J={class:"dropdown-menu dropdown-menu-end"},Q=["disabled"],W={key:0},Y={key:1,class:"spinner-grow spinner-grow-sm","aria-hidden":"true"},Z={class:"jn-placeholder"},ss={key:0,class:"text-danger"},es={key:0},os={class:"table-responsive text-nowrap"},ts={scope:"col"},ns={scope:"col"},rs={__name:"DnsResolver",setup(ls){const{t:r}=D(),f=q(),w=N(()=>f.isDarkMode);N(()=>f.isMobile);const p=b(""),g=b("A"),l=b("idle"),u=b(""),c=b([]),R=t=>{t.match(/^https?:\/\//)||(t="http://"+t);try{const o=new URL(t).hostname;if(o.match(/^[a-z0-9-]+(\.[a-z0-9-]+)*\.[a-z]{2,}$/i))return o}catch{}return u.value=r("dnsresolver.invalidURL"),null},v=t=>{g.value=t},A=()=>{z("Section","StartClick","DNSResolver"),u.value="";const t=R(p.value),s=g.value;t&&C(t,s)},C=async(t,s)=>{c.value=[],l.value="running";try{const o=await fetch(`/api/dnsresolver?hostname=${t}&type=${s}`);if(!o.ok)throw new Error("Network response was not ok");const m=await o.json();S(m),l.value="idle",u.value=""}catch(o){console.error("Error fetching DNS results:",o),l.value="idle",u.value=r("dnsresolver.fetchError")}},S=t=>{const s=(o,m)=>o.map(y=>{const _=Object.keys(y)[0],x=Array.isArray(y[_])?y[_].join(", "):y[_];return{provider:`${_} (${m})`,address:x}});t.result_dns&&c.value.push(...s(t.result_dns,"DNS")),t.result_doh&&c.value.push(...s(t.result_doh,"DoH ðŸ”’"))};return(t,s)=>(i(),a("div",V,[e("div",X,[e("p",null,n(d(r)("dnsresolver.Note")),1)]),e("div",B,[e("div",I,[e("div",{class:h(["card jn-card",{"dark-mode dark-mode-border":w.value}])},[e("div",F,[e("div",H,[e("label",K,n(d(r)("dnsresolver.Note2")),1)]),e("div",P,[$(e("input",{type:"text",class:h(["form-control",{"dark-mode":w.value}]),disabled:l.value==="running",placeholder:d(r)("dnsresolver.Placeholder"),"onUpdate:modelValue":s[0]||(s[0]=o=>p.value=o),onKeyup:T(A,["enter"]),name:"queryURL",id:"queryURL","data-1p-ignore":""},null,42,G),[[M,p.value]]),e("button",{type:"button",class:"btn btn-primary dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:l.value==="running"||!p.value},[E(n(g.value)+" "+n(d(r)("dnsresolver.Record"))+" ",1),s[7]||(s[7]=e("span",{class:"visually-hidden"},"Choose Type",-1))],8,O),e("ul",J,[e("li",{onClick:s[1]||(s[1]=o=>v("A"))},s[8]||(s[8]=[e("span",{class:"dropdown-item"},"A",-1)])),e("li",{onClick:s[2]||(s[2]=o=>v("AAAA"))},s[9]||(s[9]=[e("span",{class:"dropdown-item"},"AAAA",-1)])),e("li",{onClick:s[3]||(s[3]=o=>v("CNAME"))},s[10]||(s[10]=[e("span",{class:"dropdown-item"},"CNAME",-1)])),e("li",{onClick:s[4]||(s[4]=o=>v("MX"))},s[11]||(s[11]=[e("span",{class:"dropdown-item"},"MX",-1)])),e("li",{onClick:s[5]||(s[5]=o=>v("NS"))},s[12]||(s[12]=[e("span",{class:"dropdown-item"},"NS",-1)])),e("li",{onClick:s[6]||(s[6]=o=>v("TXT"))},s[13]||(s[13]=[e("span",{class:"dropdown-item"},"TXT",-1)]))]),e("button",{class:"btn btn-primary",onClick:A,disabled:l.value==="running"||!p.value},[l.value==="idle"?(i(),a("span",W,n(d(r)("dnsresolver.Run")),1)):k("",!0),l.value==="running"?(i(),a("span",Y)):k("",!0)],8,Q)]),e("div",Z,[u.value?(i(),a("p",ss,n(u.value),1)):k("",!0)]),c.value&&c.value.length?(i(),a("div",es,[e("div",os,[e("table",{class:h(["table table-hover",{"table-dark":w.value}])},[e("thead",null,[e("tr",null,[e("th",ts,n(d(r)("dnsresolver.Provider")),1),e("th",ns,n(d(r)("dnsresolver.Result")),1)])]),e("tbody",null,[(i(!0),a(L,null,U(c.value,(o,m)=>(i(),a("tr",{key:m},[e("td",null,n(o.provider),1),e("td",{class:h([o.address==="N/A"?"opacity-50":""])},n(o.address),3)]))),128))])],2)])])):k("",!0)])],2)])])]))}},is=j(rs,[["__scopeId","data-v-d64ef583"]]);export{is as default};
